# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ4 - ZooKeeper üë®‚Äçüåæ
## –ó–∞–¥–∞–Ω–∏–µ
+ –∑–∞–ø—É—Å—Ç–∏—Ç—å ZooKeeper,
+ –∏–∑—É—á–∏—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π ZooKeeper,
+ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —Å–µ—Å—Å–∏—é ZooKeeper CLI –∏ –æ—Å–≤–æ–∏—Ç—å –µ—ë –∫–æ–º–∞–Ω–¥—ã,
+ –Ω–∞—É—á–∏—Ç—å—Å—è –ø—Ä–æ–≤–æ–¥–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ZooKeeper,
+ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –±–∞—Ä—å–µ—Ä–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π –Ω–∞ ZooKeeper,
+ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å —Å–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞: ```brew install zookeeper``` <br/>
<img src="/L4/images/install.png" width="500"> <br/>
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –∂–µ: ```zkServer start``` <br/>
<img src="/L4/images/start.png" width="500">
## –ò–∑—É—á–µ–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
–ü–µ—Ä–µ–π–¥–µ–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —É—Å—Ç–∞–Ω–æ–≤–∫–∏ ZooKeeper –∏ –∏–∑—É—á–∏–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. <br/>
–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞–ø–∫–∏:
+ bin —Å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞, –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å ZooKeeper,
+ conf —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏,
+ contrib —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ZooKeeper –≤ –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã: rest, fuse, perl –∏ python –±–∏–±–ª–∏–æ—Ç–µ–∫–∏,
+ dist-maven –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã Maven,
+ docs –≤ –∫–æ—Ç–æ—Ä–æ–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è,
+ recipes —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã, –ø–æ–º–æ–≥–∞—é—â–∏–µ —Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ZooKeeper (–≤—ã–±–æ—Ä –ª–∏–¥–µ—Ä–∞, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –æ—á–µ—Ä–µ–¥–∏),
+ src —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏.

## –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏ ZooKeeper CLI, –æ—Å–≤–æ–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏ ZooKeeper CLI –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∫—Ä–∏–ø—Ç zkCli.
–°–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ZooKeeper CLI —Å–µ—Å—Å–∏–∏: <br/>
<img src="/L4/images/zkCli.png" width="500"> <br/>
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ. –î–ª—è –≤—ã–≤–æ–¥–∞ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –Ω–∞–±–µ—Ä–µ–º ```help```:
<img src="/L4/images/help.png" width="500"> <br/>
–î–∞–ª–µ–µ –ø–æ—Å–ª–µ–¥—É–µ—Ç –∏–∑—É—á–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –ù–∞—É—á–∏–º—Å—è –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —É–∑–ª–æ–≤ znode, —Å—á–∏—Ç—ã–≤–∞—Ç—å –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ znode –∏–∑ CLI, —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ –Ω–∞ –±–∞–∑–æ–≤—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö.
–ù–∞—Ö–æ–¥—è—Å—å –≤ –∫–æ–Ω—Å–æ–ª–∏ CLI –≤–≤–µ–¥–µ–º –∫–æ–º–∞–Ω–¥—É ```ls /```.
–í —Ä–µ–∑—É–ª—å—Ç–µ –ø–æ–ª—É—á–∏–º —Å–ø–∏—Å–æ–∫ —É–∑–ª–æ–≤ –≤ –∫–æ—Ä–Ω–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö ZooKeeper. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –æ–¥–∏–Ω —É–∑–µ–ª. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –º–æ–∂–Ω–æ –∏–∑—É—á–∞—Ç—å –Ω–µ–∫–æ—Ä–Ω–µ–≤—ã–µ —É–∑–ª—ã. –í—ã–≤–µ–¥–µ–º —Å–ø–∏—Å–æ–∫ –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–æ–≤ ```/zookeeper```: <br/>
<br/>
<img src="/L4/images/ls_zookeeper.png" width="500"> <br/>
–¢–µ–ø–µ—Ä—å –≤ –∫–æ—Ä–Ω–µ —Å–æ–∑–¥–∏–º —Å–≤–æ–π —É–∑–µ–ª ```/mynode``` —Å –¥–∞–Ω–Ω—ã–º–∏ ```"first_version"``` —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥–æ–π ```create /mynode 'first_version'```.
–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤ –∫–æ—Ä–Ω–µ –ø–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π —É–∑–µ–ª: <br/>
<br/>
<img src="/L4/images/create_my_node.png" width="500"> <br/>
–ò–∑–º–µ–Ω–∏–º –¥–∞–Ω–Ω—ã–µ —É–∑–ª–∞ –Ω–∞ ```"second_version"```: <br/>
<br/>
<img src="/L4/images/second_version.png" width="500"> <br/>
–°–æ–∑–¥–∞–¥–∏–º –¥–≤–∞ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö (sequential) —É–∑–ª–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–æ—á–µ—Ä–Ω–∏—Ö ```mynode```: <br/>
<br/>
<img src="/L4/images/childs.png" width="500"> <br/>
<br/>
–ü–µ—Ä–µ–¥–∞–≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ñ–ª–∞–≥ ```-s```, –º—ã —É–∫–∞–∑–∞–ª–∏, —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–π —É–∑–µ–ª –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π. –≠—Ç–æ—Ç —Å–ø–æ—Å–æ–± –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —É–∑–ª—ã —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä. <br/>
–ü—Ä–∏–º–µ—Ä. –ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –∫ –≥—Ä—É–ø–ø–µ. <br/>
–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ ZooKeeper –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∫–æ–¥–∞, –º—ã –º–æ–∂–µ–º —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∫ –≥—Ä—É–ø–ø–µ –≤ CLI. <br/>
–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –≤ –∫–æ—Ä–Ω–µ zookeeper —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —É–∑–µ–ª –ø–æ–¥ –∏–º–µ–Ω–µ–º mygroup. –ó–∞—Ç–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Å—Å–∏–π CLI –±—É–¥—É—Ç —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤, –¥–æ–±–∞–≤–ª—è—é—â–∏—Ö —Å–µ–±—è –≤ —ç—Ç—É –≥—Ä—É–ø–ø—É. –ö–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —ç—Ñ–∏–º–µ—Ä–Ω—ã–π —É–∑–µ–ª –≤ mygroup –∏–µ—Ä–∞—Ä—Ö–∏—é. –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–µ—Å—Å–∏–∏ —É–∑–µ–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç —É–¥–∞–ª—è—Ç—å—Å—è.
–≠—Ç–æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏–º—ë–Ω (DNS) —É–∑–ª–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∞. –ö–∞–∂–¥—ã–π —É–∑–µ–ª —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–µ–±—è –ø–æ–¥ —Å–≤–æ–∏–º –∏–º–µ–Ω–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–≤–æ–π url –∏–ª–∏ ip –∞–¥—Ä–µ—Å. –£–∑–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–ª–∏ –∞–≤–∞—Ä–∏–π–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Ä–∞–±–æ—Ç—É, –≤ —Å–ø–∏—Å–∫–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —É–∑–ª–æ–≤ —Å –∏—Ö –∞–¥—Ä–µ—Å–∞–º–∏. <br/>
–í–Ω—É—Ç—Ä–∏ CLI —Å–µ—Å—Å–∏–∏, —Å–æ–∑–¥–∞–¥–∏–º —É–∑–µ–ª ```mygroup```. 
–û—Ç–∫—Ä–æ–µ–º –¥–≤–µ –Ω–æ–≤—ã—Ö CLI –∫–æ–Ω—Å–æ–ª–∏ –∏ –≤ –∫–∞–∂–¥–æ–π —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ –¥–æ—á–µ—Ä–Ω–µ–º—É —É–∑–ª—É –≤ ```mygroup``` –∏ –ø—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ ```grue``` –∏ ```bleen``` —è–≤–ª—è—é—Ç—Å—è —á–ª–µ–Ω–∞–º–∏ –≥—Ä—É–ø–ø—ã ```mygroup```: <br/>
<br/>
<img src="/L4/images/grue_bleen.png" width="800"> <br/>
<br/>
–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Ç–µ–ø–µ—Ä—å, —á—Ç–æ –æ–¥–Ω–æ–º—É –∏–∑ –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥—Ä—É–≥–æ–º –∫–ª–∏–µ–Ω—Ç–µ (–∫ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –º–æ–≥—É—Ç –≤—ã—Å—Ç—É–ø–∞—Ç—å —É–∑–ª—ã –∫–ª–∞—Å—Ç–µ—Ä–∞). –≠—Ç–æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π —ç–º—É–ª–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª—É—á–µ–Ω–∏–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–æ–π get. –í—ã–±–µ—Ä–µ–º –∫–æ–Ω—Å–æ–ª—å ```grue``` –∏ –æ–±—Ä–∞—Ç–∏–º—Å—è –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —É–∑–ª–∞ ```bleen```. <br/>
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —É–∑–ª–µ –∫–ª–∏–µ–Ω—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å ```url``` –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞, –ª–∏–±–æ –ª—é–±–∞—è –¥—Ä—É–≥–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ–º–∞—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. <br/>
–¢–µ–ø–µ—Ä—å —ç–º—É–ª–∏—Ä—É–µ–º –∞–≤–∞—Ä–∏–π–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ª—é–±–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞. –ù–∞–∂–º–µ–º —Å–æ—á–µ—Ç–∞–Ω–∏–µ –∫–ª–∞–≤–∏—à ```Ctrl + D``` –≤ –æ–¥–Ω–æ–π –∏–∑ –∫–æ–Ω—Å–æ–ª–µ–π, —Å–æ–∑–¥–∞–≤—à–µ–π —ç—Ñ–∏–º–µ—Ä–Ω—ã–π —É–∑–µ–ª. <br/>
–ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —É–∑–µ–ª –ø—Ä–æ–ø–∞–ª –∏–∑ ```mygroup```. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–æ–≤ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –Ω–µ —Å—Ä–∞–∑—É ‚Äî –æ—Ç 2 –¥–æ 20 ```tickTime```, –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ ```zoo.cfg```.
<br/>
<img src="/L4/images/lost_grue.png" width="500"> <br/>
<br/>
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –ø–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –¥—Ä—É–≥–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.
–í –∑–∞–∫–ª—é—á–µ–Ω–∏–∏ —É–¥–∞–ª–∏–º —É–∑–µ–ª ```/mygroup```.
<br/>
<img src="/L4/images/delete.png" width="500"> <br/>
<br/>
### –ü—Ä–∏–º–µ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ ZooKeeper –æ–¥–Ω–æ –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –ú—ã –±—É–¥–µ–º —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—É—é –∫–æ–Ω—Ü–µ–ø—Ü–∏—é —Ç–∞–∫–∂–µ —Å –ø–æ–º–æ—â—å—é CLI. <br/>
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ZooKeeper –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–º–µ–µ—Ç –¥–≤–∞ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: 
+ –ù–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç —É–∑–Ω–∞–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–≤–æ—é —Ä–æ–ª—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ,
+ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–±–æ—Ç—ã 24/7. <br/>


–°–æ–∑–¥–∞–¥–∏–º –≤ –∫–æ—Ä–Ω–µ —É–∑–µ–ª ```"myconfig"```, –≤ –∑–∞–¥–∞—á—É –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –≤—Ö–æ–¥–∏—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —É–∑–µ–ª –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É ```'sheep_count=1'```.
–í–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–∞—à–µ–≥–æ –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±—É–¥–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è, –º—ã –±—É–¥–µ–º –æ–±–Ω–æ–≤–ª—è—Ç—å ```znode``` —Å—Ç—Ä–æ–∫–æ–π —Å –Ω–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º. –î—Ä—É–≥–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ö—Ä–∞–Ω–∏–º—ã–µ –≤ —ç—Ç–æ–º —É–∑–ª–µ –¥–∞–Ω–Ω—ã–µ. <br/>
–û—Ç–∫—Ä–æ–µ–º –Ω–æ–≤—É—é –∫–æ–Ω—Å–æ–ª—å –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ ZooKeeper. –î–∞–Ω–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å –±—É–¥–µ—Ç –∏–≥—Ä–∞—Ç—å —Ä–æ–ª—å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –æ–∂–∏–¥–∞–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –≤ —Å–ª—É—á–∞–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–π –≤ ```/myconfig``` znode. <br/>
–°–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç watch-—Ç—Ä–∏–≥–≥–µ—Ä –Ω–∞ —É–∑–µ–ª: <br/>
```cmd 
get /myconfig -w true
``` 
</br>

–í–µ—Ä–Ω–µ–º—Å—è –∫ –ø–µ—Ä–≤–æ–º—É —Ç–µ—Ä–º–∏–Ω–∞–ª—É –∏ –∏–∑–º–µ–Ω–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ ```myconfig```:
```cmd
set /myconfig 'sheep_count=2'
```
<br/>
–í–æ –≤—Ç–æ—Ä–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö! <br/>
<img src="/L4/images/myconfig_test.png" width="500"> <br/>

–¢—Ä–∏–≥–≥–µ—Ä —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–¥–Ω–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è, –∞ –∑–Ω–∞—á–∏—Ç –µ–≥–æ –ø—Ä–∏–¥—ë—Ç—Å—è '–≤–∑–≤–æ–¥–∏—Ç—å' –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∑–∞–Ω–æ–≤–æ. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –≤ –ª–æ–≥–∏–∫–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–∞–∫–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞. <br/>

–£–¥–∞–ª–∏–º —É–∑–µ–ª ```/myconfig```–∏ –ø—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–∏–ª–∞—Å—å.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –∑–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
1. –†–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –æ–±–µ–¥–∞—é—â–∏—Ö —Ñ–∏–ª–æ—Å–æ—Ñ–æ–≤ <br/>
–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è :
```scala
Philosopher 2 is going to eat
Philosopher 1 is going to eat
Philosopher 0 is going to eat
Philosopher 0 picked up the left fork
Philosopher 0 picked up the right fork
Philosopher 0 put the right fork
Philosopher 1 picked up the left fork
Philosopher 1 picked up the right fork
Philosopher 0 put the loft fork and finished eating
Philosopher 0 is thinking
Philosopher 2 picked up the left fork
Philosopher 1 put the right fork
Philosopher 1 put the loft fork and finished eating
Philosopher 2 picked up the right fork
Philosopher 1 is thinking
Philosopher 0 is going to eat
Philosopher 1 is going to eat
Philosopher 0 picked up the left fork
Philosopher 2 put the right fork
Philosopher 0 picked up the right fork
Philosopher 2 put the loft fork and finished eating
Philosopher 2 is thinking
Philosopher 1 picked up the left fork
Philosopher 0 put the right fork
Philosopher 1 picked up the right fork
Philosopher 0 put the loft fork and finished eating
Philosopher 0 is thinking
Philosopher 1 put the right fork
Philosopher 1 put the loft fork and finished eating
Philosopher 1 is thinking
Philosopher 2 is going to eat
Philosopher 2 picked up the left fork
Philosopher 2 picked up the right fork
Philosopher 2 put the right fork
Philosopher 2 put the loft fork and finished eating
Philosopher 2 is thinking

Process finished with exit code 0
```
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–≤—É—Ñ–∞–∑–Ω—ã–π –∫–æ–º–º–∏—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è high-available —Ä–µ–≥–∏—Å—Ç—Ä <br/>
–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
```python
Waiting others clients: []
Client 0 request commit
Client 1 request abort
Client 4 request abort
Client 3 request abort
Client 2 request abort
Check clients
Client 0 do abort
Client 1 do abort
Client 2 do abort
Client 3 do abort
Client 4 do abort
Waiting others clients: []

Process finished with exit code 0
```
